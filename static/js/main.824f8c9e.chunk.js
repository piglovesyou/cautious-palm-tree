(this.webpackJsonpundefined=this.webpackJsonpundefined||[]).push([[0],{125:function(t,e,a){},131:function(t,e){},133:function(t,e){},143:function(t,e){},145:function(t,e){},172:function(t,e){},173:function(t,e){},178:function(t,e){},180:function(t,e){},187:function(t,e){},206:function(t,e){},227:function(t,e,a){"use strict";a.r(e);var r=a(2),n=a.n(r),s=a(115),o=a.n(s),i=(a(125),a(116)),c=a(15),u=a(33),d=a(34),l=a(120),h=a(119),f=a(118),b=a(117),j=a.n(b),v=a(61),m=a(60),p=a.n(m),O=function(t){for(var e=[],a=0;a<t;a++)e.push(a);return e},y=function(){var t=Math.random();return{firstName:p.a.generate({words:1,numbers:0}),lastName:p.a.generate({words:1,numbers:0}),age:Math.floor(30*Math.random()),visits:Math.floor(100*Math.random()),progress:Math.floor(100*Math.random()),status:t>.66?"relationship":t>.33?"complicated":"single"}};var w=function(){function t(e,a){Object(u.a)(this,t),this.data=void 0,this.max=void 0,this.hist=[],this.pos=-1,this.data=Array.from(e),this.max=a}return Object(d.a)(t,[{key:"setNewValue",value:function(t,e,a){var r=this.data[t];if(!r)throw new Error("Never");var n=Object.create(r);return n[e]=a,this.data[t]=n,this.hist.push([t,n]),this.hist.length>this.max?this.hist.shift():this.pos=this.hist.length-1,this}},{key:"undo",value:function(){if(this.pos<0)return window.alert("Unable to undo. You're already in the edge of history."),this;var t=Object(c.a)(this.hist[this.pos],2),e=t[0],a=t[1];return this.data[e]=a.__proto__,this.pos--,this}},{key:"redo",value:function(){if(!this.hist[this.pos+1])return window.alert("Unable to redo. You're already in the edge of history."),this;if(this.pos+1>=this.max)throw new Error("Never");var t=Object(c.a)(this.hist[this.pos+1],2),e=t[0],a=t[1];return this.data[e]=a,this.pos++,this}},{key:"getData",value:function(){return this.data}},{key:"toArray",value:function(){return this.data.map((function(t){return t}))}}]),t}(),g=a(3),x=function(t){var e=t.value,a=t.rowIndex,n=t.columnAccessor,s=t.updateMyData,o=Object(r.useRef)(""),i=Object(r.useCallback)((function(t){var e=t.currentTarget.value;o.current!==e&&s(a,n,e)}),[]),c=Object(r.useCallback)((function(t){o.current=t.currentTarget.value}),[]);return Object(g.jsx)("input",{defaultValue:e,onFocus:c,onBlur:i})},N=function(t){Object(l.a)(a,t);var e=Object(h.a)(a);function a(){return Object(u.a)(this,a),e.apply(this,arguments)}return Object(d.a)(a,[{key:"render",value:function(){var t=this.props,e=t.data,a=e.columns,r=e.data,n=e.updateMyData,s=t.index,o=t.style,i=r[s],c="row_".concat(s);return Object(g.jsx)("div",{style:o,className:"tr",role:"row",children:a.map((function(t){var e=t.accessor,a=t.width,r=t.Header;if("function"===typeof e)return Object(g.jsx)("div",{className:"td",role:"cell",children:e(i,s)},r);var o=i[e],u=a?{width:a}:void 0,d="".concat(c,"-").concat(r,"--").concat(o);return Object(g.jsx)("div",{className:"td",style:u,role:"cell",children:Object(g.jsx)(x,{value:o,columnAccessor:e,rowIndex:s,updateMyData:n})},d)}))})}}]),a}(r.PureComponent);function M(){var t=document.querySelector("#root"),e=document.querySelector(".toolbar");return[t.offsetWidth,t.offsetHeight-e.offsetHeight]}function k(t){var e=t.columns,a=t.data,n=t.updateMyData,s=Object(r.useState)([2e3,2e3]),o=Object(c.a)(s,2),i=Object(c.a)(o[0],2),u=i[0],d=i[1],l=o[1];return Object(r.useEffect)((function(){window.addEventListener("resize",j()((function(){l(M())}),200)),l(M())}),[]),Object(g.jsx)("div",{className:"tableWrap",children:Object(g.jsxs)("div",{className:"table",children:[Object(g.jsx)("div",{className:"tr",role:"row",children:e.map((function(t){var e=t.Header,a=t.accessor,r=t.width,n=r?{width:r}:void 0;return Object(g.jsx)("div",{className:"th",style:n,role:"cell",children:e},a)}))}),Object(g.jsx)(f.a,{className:"tableBody",width:u,height:d,itemCount:a.length,itemSize:35,itemData:{columns:e,data:a,updateMyData:n},children:N})]})})}var H=function(){var t=Object(r.useMemo)((function(){return[{Header:"Row Index",accessor:function(t,e){return e}},{Header:"First Name",accessor:"firstName"},{Header:"Last Name",accessor:"lastName"},{Header:"Age",accessor:"age",width:50},{Header:"Visits",accessor:"visits",width:60},{Header:"Status",accessor:"status"},{Header:"Profile Progress",accessor:"progress"}]}),[]),e=Object(r.useMemo)((function(){return new w(function(){for(var t=arguments.length,e=new Array(t),a=0;a<t;a++)e[a]=arguments[a];return function t(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,r=e[a];return O(r).map((function(r){return Object(v.a)(Object(v.a)({},y()),{},{subRows:e[a+1]?t(a+1):void 0})}))}()}(1e5),10)}),[]),a=n.a.useState(e.getData()),s=Object(c.a)(a,2),o=s[0],u=s[1];return Object(r.useEffect)((function(){window.addEventListener("keydown",(function(t){t.metaKey&&"z"===t.key&&(t.shiftKey?u(e.redo().toArray()):u(e.undo().toArray()),t.preventDefault())}))}),[]),Object(g.jsxs)(g.Fragment,{children:[Object(g.jsxs)("div",{className:"toolbar",children:[Object(g.jsxs)("div",{children:["The cells are editable. Hit ",Object(g.jsx)("code",{children:"meta+z/meta+shift/z"})," to undo/redo. Note it saves the value on blur. View source on ",Object(g.jsx)("a",{href:"https://github.com/piglovesyou/cautious-palm-tree",children:"GitHub"}),"."]}),Object(g.jsx)("button",{className:"button1",onClick:function(){var t,e=Object(i.a)(document.querySelectorAll('[role="cell"]'));try{for(e.s();!(t=e.n()).done;){t.value.style.backgroundColor="lightblue"}}catch(a){e.e(a)}finally{e.f()}},children:"Paint cells to check what was re-render"})]}),Object(g.jsx)(k,{columns:t,data:o,updateMyData:function(t,a,r){u(e.setNewValue(t,a,r).toArray())}})]})};o.a.render(Object(g.jsx)(n.a.StrictMode,{children:Object(g.jsx)(H,{})}),document.getElementById("root"))}},[[227,1,2]]]);
//# sourceMappingURL=main.824f8c9e.chunk.js.map